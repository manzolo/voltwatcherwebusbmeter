(self.webpackChunk=self.webpackChunk||[]).push([[547],{8725:t=>{t.exports=window.Routing},56584:(t,e,o)=>{"use strict";o(41539),o(88674),o(21249),o(68309),o(68304),o(30489),o(12419),o(78011),o(69070),o(82526),o(41817),o(32165),o(66992),o(78783),o(33948);var r=o(67294),n=o(20745);o(32564),o(83710),o(47941);function a(t){let{chartVersion:e="current",chartPackages:o=["corechart","controls"],chartLanguage:n="en",mapsApiKey:a}=t;const[s,i]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1);var u,h,p;return u="https://www.gstatic.com/charts/loader.js",h=()=>{const t=null===window||void 0===window?void 0:window.google;t&&(t.charts.load(e,{packages:o,language:n,mapsApiKey:a}),t.charts.setOnLoadCallback((()=>{i(t)})))},p=()=>{c(!0)},(0,r.useEffect)((()=>{if(!document)return;const t=document.querySelector('script[src="'.concat(u,'"]'));if(null==t?void 0:t.dataset.loaded)return void(null==h||h());const e=t||document.createElement("script");t||(e.src=u);const o=()=>{e.dataset.loaded="1",null==h||h()};return e.addEventListener("load",o),p&&e.addEventListener("error",p),t||document.head.append(e),()=>{e.removeEventListener("load",o),p&&e.removeEventListener("error",p)}}),[]),[s,l]}function s(t){let{onLoad:e,onError:o,...n}=t;const[s,i]=a(n);return(0,r.useEffect)((()=>{s&&e&&e(s)}),[s]),(0,r.useEffect)((()=>{i&&o&&o()}),[i]),null}const i={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{}};let l=0;const c=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],{Provider:u,Consumer:h}=r.createContext(i),p=t=>{let{children:e,value:o}=t;return r.createElement(u,{value:o},e)},d=t=>{let{render:e}=t;return r.createElement(h,null,(t=>e(t)))};class g extends r.Component{componentDidMount(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()}componentWillUnmount(){const{google:t,googleChartWrapper:e}=this.props;window.removeEventListener("resize",this.onResize),t.visualization.events.removeAllListeners(e),"Timeline"===e.getChartType()&&e.getChart()&&e.getChart().clearChart()}componentDidUpdate(){this.draw(this.props)}render(){return null}constructor(...t){super(...t),this.state={hiddenColumns:[]},this.listenToLegendToggle=()=>{const{google:t,googleChartWrapper:e}=this.props;t.visualization.events.addListener(e,"select",(()=>{const t=e.getChart().getSelection(),o=e.getDataTable();if(0===t.length||t[0].row||!o)return;const r=t[0].column,n=this.getColumnID(o,r);this.state.hiddenColumns.includes(n)?this.setState((t=>({...t,hiddenColumns:[...t.hiddenColumns.filter((t=>t!==n))]}))):this.setState((t=>({...t,hiddenColumns:[...t.hiddenColumns,n]})))}))},this.applyFormatters=(t,e)=>{const{google:o}=this.props;for(let r of e)switch(r.type){case"ArrowFormat":new o.visualization.ArrowFormat(r.options).format(t,r.column);break;case"BarFormat":new o.visualization.BarFormat(r.options).format(t,r.column);break;case"ColorFormat":{const e=new o.visualization.ColorFormat(r.options),{ranges:n}=r;for(let t of n)e.addRange(...t);e.format(t,r.column);break}case"DateFormat":new o.visualization.DateFormat(r.options).format(t,r.column);break;case"NumberFormat":new o.visualization.NumberFormat(r.options).format(t,r.column);break;case"PatternFormat":new o.visualization.PatternFormat(r.options).format(t,r.column);break}},this.getColumnID=(t,e)=>t.getColumnId(e)||t.getColumnLabel(e),this.draw=async t=>{let{data:e,diffdata:o,rows:r,columns:n,options:a,legend_toggle:s,legendToggle:i,chartType:l,formatters:c,spreadSheetUrl:u,spreadSheetQueryParameters:h}=t;const{google:p,googleChartWrapper:d}=this.props;let g,f=null;if(o){const t=p.visualization.arrayToDataTable(o.old),e=p.visualization.arrayToDataTable(o.new);f=p.visualization[l].prototype.computeDiff(t,e)}g=null!==e?Array.isArray(e)?p.visualization.arrayToDataTable(e):new p.visualization.DataTable(e):r&&n?p.visualization.arrayToDataTable([n,...r]):u?await async function(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((r,n)=>{const a="".concat(o.headers?"headers=".concat(o.headers):"headers=0"),s="".concat(o.query?"&tq=".concat(encodeURIComponent(o.query)):""),i="".concat(o.gid?"&gid=".concat(o.gid):""),l="".concat(o.sheet?"&sheet=".concat(o.sheet):""),c="".concat(o.access_token?"&access_token=".concat(o.access_token):""),u="".concat(a).concat(i).concat(l).concat(s).concat(c),h="".concat(e,"/gviz/tq?").concat(u);new t.visualization.Query(h).send((t=>{t.isError()?n("Error in query:  ".concat(t.getMessage()," ").concat(t.getDetailedMessage())):r(t.getDataTable())}))}))}(p,u,h):p.visualization.arrayToDataTable([]);const m=g.getNumberOfColumns();for(let t=0;t<m;t+=1){const e=this.getColumnID(g,t);if(this.state.hiddenColumns.includes(e)){const e=g.getColumnLabel(t),o=g.getColumnId(t),r=g.getColumnType(t);g.removeColumn(t),g.addColumn({label:e,id:o,type:r})}}const y=d.getChart();"Timeline"===d.getChartType()&&y&&y.clearChart(),d.setChartType(l),d.setOptions(a||{}),d.setDataTable(g),d.draw(),null!==this.props.googleChartDashboard&&this.props.googleChartDashboard.draw(g),f&&(d.setDataTable(f),d.draw()),c&&(this.applyFormatters(g,c),d.setDataTable(g),d.draw()),!0!==i&&!0!==s||this.grayOutHiddenColumns({options:a})},this.grayOutHiddenColumns=t=>{let{options:e}=t;const{googleChartWrapper:o}=this.props,r=o.getDataTable();if(!r)return;const n=r.getNumberOfColumns();if(!1===this.state.hiddenColumns.length>0)return;const a=Array.from({length:n-1}).map(((t,o)=>{const n=this.getColumnID(r,o+1);return this.state.hiddenColumns.includes(n)?"#CCCCCC":e&&e.colors?e.colors[o]:c[o]}));o.setOptions({...e,colors:a}),o.draw()},this.onResize=()=>{const{googleChartWrapper:t}=this.props;t.draw()}}}class f extends r.Component{componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(){return!1}render(){const{google:t,googleChartWrapper:e,googleChartDashboard:o}=this.props;return r.createElement(d,{render:n=>r.createElement(g,Object.assign({},n,{google:t,googleChartWrapper:e,googleChartDashboard:o}))})}}class m extends r.Component{shouldComponentUpdate(){return!1}listenToEvents(t){let{chartEvents:e,google:o,googleChartWrapper:r}=t;if(e){o.visualization.events.removeAllListeners(r);for(let t of e){var n=this;const{eventName:e,callback:a}=t;o.visualization.events.addListener(r,e,(function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];a({chartWrapper:r,props:n.props,google:o,eventArgs:e})}))}}}render(){const{google:t,googleChartWrapper:e}=this.props;return r.createElement(d,{render:o=>(this.listenToEvents({chartEvents:o.chartEvents||null,google:t,googleChartWrapper:e}),null)})}}let y=0;class v extends r.Component{componentDidMount(){const{options:t,google:e,chartType:o,chartWrapperParams:r,toolbarItems:n,getChartEditor:a,getChartWrapper:s}=this.props,i={chartType:o,options:t,containerId:this.getGraphID(),...r},l=new e.visualization.ChartWrapper(i);l.setOptions(t||{}),s&&s(l,e);const c=new e.visualization.Dashboard(this.dashboard_ref),u=this.addControls(l,c);n&&e.visualization.drawToolbar(this.toolbar_ref.current,n);let h=null;a&&(h=new e.visualization.ChartEditor,a({chartEditor:h,chartWrapper:l,google:e})),this.setState({googleChartEditor:h,googleChartControls:u,googleChartDashboard:c,googleChartWrapper:l,isReady:!0})}componentDidUpdate(){if(!this.state.googleChartWrapper)return;if(!this.state.googleChartDashboard)return;if(!this.state.googleChartControls)return;const{controls:t}=this.props;if(t)for(let e=0;e<t.length;e+=1){const{controlType:o,options:r,controlWrapperParams:n}=t[e];n&&"state"in n&&this.state.googleChartControls[e].control.setState(n.state),this.state.googleChartControls[e].control.setOptions(r),this.state.googleChartControls[e].control.setControlType(o)}}shouldComponentUpdate(t,e){return this.state.isReady!==e.isReady||t.controls!==this.props.controls}render(){const{width:t,height:e,options:o,style:n}=this.props,a={height:e||o&&o.height,width:t||o&&o.width,...n};return this.props.render?r.createElement("div",{ref:this.dashboard_ref,style:a},r.createElement("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):r.createElement("div",{ref:this.dashboard_ref,style:a},this.renderControl((t=>{let{controlProp:e}=t;return"bottom"!==e.controlPosition})),this.renderChart(),this.renderControl((t=>{let{controlProp:e}=t;return"bottom"===e.controlPosition})),this.renderToolBar())}constructor(...t){var e;super(),e=this,this.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},this.graphID=null,this.dashboard_ref=r.createRef(),this.toolbar_ref=r.createRef(),this.getGraphID=()=>{const{graphID:t,graph_id:e}=this.props;let o;return t||e?o=t&&!e?t:e&&!t?e:t:this.graphID?o=this.graphID:(l+=1,o="reactgooglegraph-".concat(l)),this.graphID=o,this.graphID},this.getControlID=(t,e)=>{let o;return y+=1,o=void 0===t?"googlechart-control-".concat(e,"-").concat(y):t,o},this.addControls=(t,e)=>{const{google:o,controls:r}=this.props,n=r?r.map(((t,e)=>{const{controlID:r,controlType:n,options:a,controlWrapperParams:s}=t,i=this.getControlID(r,e);return{controlProp:t,control:new o.visualization.ControlWrapper({containerId:i,controlType:n,options:a,...s})}})):null;if(!n)return null;e.bind(n.map((t=>{let{control:e}=t;return e})),t);for(let e of n){const{control:r,controlProp:n}=e,{controlEvents:s=[]}=n;for(let e of s){var a=this;const{callback:n,eventName:s}=e;o.visualization.events.removeListener(r,s,n),o.visualization.events.addListener(r,s,(function(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];n({chartWrapper:t,controlWrapper:r,props:a.props,google:o,eventArgs:s})}))}}return n},this.renderChart=()=>{const{width:t,height:e,options:o,style:n,className:a,rootProps:s,google:i}=this.props,l={height:e||o&&o.height,width:t||o&&o.width,...n};return r.createElement("div",Object.assign({id:this.getGraphID(),style:l,className:a},s),this.state.isReady&&null!==this.state.googleChartWrapper?r.createElement(r.Fragment,null,r.createElement(f,{googleChartWrapper:this.state.googleChartWrapper,google:i,googleChartDashboard:this.state.googleChartDashboard}),r.createElement(m,{googleChartWrapper:this.state.googleChartWrapper,google:i})):null)},this.renderControl=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t=>!0;return e.state.isReady&&null!==e.state.googleChartControls?r.createElement(r.Fragment,null,e.state.googleChartControls.filter((e=>{let{controlProp:o,control:r}=e;return t({control:r,controlProp:o})})).map((t=>{let{control:e,controlProp:o}=t;return r.createElement("div",{key:e.getContainerId(),id:e.getContainerId()})}))):null},this.renderToolBar=()=>this.props.toolbarItems?r.createElement("div",{ref:this.toolbar_ref}):null}}class C extends r.Component{render(){const{chartLanguage:t,chartPackages:e,chartVersion:o,mapsApiKey:n,loader:a,errorElement:i}=this.props;return r.createElement(p,{value:this.props},"ready"===this.state.loadingStatus&&null!==this.state.google?r.createElement(v,Object.assign({},this.props,{google:this.state.google})):"errored"===this.state.loadingStatus&&i?i:a,r.createElement(s,{chartLanguage:t,chartPackages:e,chartVersion:o,mapsApiKey:n,onLoad:this.onLoad,onError:this.onError}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}isFullyLoaded(t){const{controls:e,toolbarItems:o,getChartEditor:r}=this.props;return t&&t.visualization&&t.visualization.ChartWrapper&&t.visualization.Dashboard&&(!e||t.visualization.ChartWrapper)&&(!r||t.visualization.ChartEditor)&&(!o||t.visualization.drawToolbar)}constructor(...t){super(...t),this._isMounted=!1,this.state={loadingStatus:"loading",google:null},this.onLoad=t=>{if(this.props.onLoad&&this.props.onLoad(t),this.isFullyLoaded(t))this.onSuccess(t);else{const t=setInterval((()=>{const e=window.google;this._isMounted?e&&this.isFullyLoaded(e)&&(clearInterval(t),this.onSuccess(e)):clearInterval(t)}),1e3)}},this.onSuccess=t=>{this.setState({loadingStatus:"ready",google:t})},this.onError=()=>{this.setState({loadingStatus:"errored"})}}}var b;C.defaultProps=i,function(t){t.annotation="annotation",t.annotationText="annotationText",t.certainty="certainty",t.emphasis="emphasis",t.interval="interval",t.scope="scope",t.style="style",t.tooltip="tooltip",t.domain="domain"}(b||(b={}));var w=o(79351);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function D(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e){return T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},T(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,r=P(t);if(e){var n=P(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return O(this,o)}}function O(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}var z=o(8725);const _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(s,t);var e,o,n,a=S(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).state={chart:[],options:{}},e}return e=s,(o=[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidMount",value:function(){var t=this;this.refreshData(),this.interval=setInterval((function(){t.refreshData()}),3e5)}},{key:"refreshData",value:function(){var t=this,e=z.generate("Device_Chart",{device:this.props.deviceid});fetch(e).then((function(t){return t.json()})).then((function(e){for(var o={title:t.props.devicename,tooltip:{textStyle:{color:"#0073e6"},showColorCode:!0,isHtml:!0,trigger:"visible"},hAxis:{format:"dd/MM HH:mm",gridlines:{color:"none"},textStyle:{fontName:"Roboto",fontSize:"10",format:"d/m/Y"}},chartArea:{width:"97%",height:"80%"},legend:{position:"none"},vAxis:{format:"#0.00",gridlines:{count:-1},textStyle:{fontName:"Roboto",fontSize:"10"}}},r=1;r<e.length;r++)e[r][0]=new Date(e[r][0]);t.setState({chart:e,options:o})})).catch((function(t){console.error("There was an error!",t)}))}},{key:"render",value:function(){if(Object.keys(this.state.chart).length<=2)return null;var t=r.createElement(w.gy,{height:"100",width:"100",color:"blue",ariaLabel:"loading"});return r.createElement(r.Fragment,null,r.createElement(C,{chartType:"LineChart",chartLanguage:"it",data:this.state.chart,options:this.state.options,loader:t,width:"100%",height:"400px",legendToggle:!0}))}}])&&D(e.prototype,o),n&&D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(r.Component);function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function I(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L(t,e){return L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},L(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,r=R(t);if(e){var n=R(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return A(this,o)}}function A(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var j=o(8725),F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(s,t);var e,o,n,a=k(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).state={devices:[]},e}return e=s,(o=[{key:"componentDidMount",value:function(){var t=this,e=j.generate("Device_List");fetch(e).then((function(t){return t.json()})).then((function(e){t.setState({devices:e})}))}},{key:"render",value:function(){return r.createElement(r.Fragment,null,this.state.devices.map((function(t){var e=t.id,o=t.address,n=t.name;return r.createElement(_,{key:e,deviceid:e,address:o,devicename:n||o})})))}}])&&I(e.prototype,o),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(r.Component);n.createRoot(document.getElementById("chart")).render(r.createElement(r.StrictMode,null,r.createElement(F,null)))},83710:(t,e,o)=>{var r=o(1702),n=o(31320),a=Date.prototype,s="Invalid Date",i="toString",l=r(a.toString),c=r(a.getTime);String(new Date(NaN))!=s&&n(a,i,(function(){var t=c(this);return t==t?l(this):s}))}},t=>{t.O(0,[109,78,845],(()=>{return e=56584,t(t.s=e);var e}));t.O()}]);